#require "http"
require "net/http"
#require "uri"
#require "echonest-ruby-api"
require 'echonest'
require 'json'

class HomeController < ApplicationController
  def index
	  #ListeningWorker.perform_async('http://icy-e-bz-04-cr.sharp-stream.com:8000/magic1054.mp3')
    #ListeningWorker.perform_async('http://media-sov.musicradio.com:80/CapitalMP3')
    #fajlli = Rails.root.join("public", "icy-e-bz-04-cr.sharp-stream.com2016-02-25T10:27:13+01:00.mp3")
    #echonest = Echonest('UIGYBYREFYB127RYP')
    #@analysis = echonest.track.analysis(fajlli)
    #metadata5 = @analysis.title
    #puts metadata5

    #http = Curl.post("http://80.80.172.245:8080/ingest", {fp_code: "eJy1ml2SYysOhLcEQvwtB5DY_xLmk19qpiJMPXRM3NvZ0cf2OSBSmSlXpZSSpQeU-YL-BJMXuD4gt_yCIw8QmS_Y6wXWHlBSf4GcF4zyglsfoJJf4PMBNUr6Hep-wdAXbHtAq_UBLO4FRV6g_oJWX9DtBZYfkGd9wSkvsP4AKfaCfh9QdL1gyAvWfUHQ5ytoyS_Y-wX-ghrF_gotlwekaMTvIPqCdl7Qn-DjBfc-4A-tW_0Fe77A6wNE1gtae4HVBxSxF-h4wT8wVlt_wZuTxx5Q9bygPiEM7Tvc-QBO6gVvTs4n3PKAnPcLmrxg5hd4e4CEVX6HOMavUMRfMNsL3loXFvAdAr9DRKGvUEd7wV0PaNGIXwHfecHbB3d_QE7ygqDQd-j5BW_mRED7Ds9GEakP-IM5TV_wDMiq-wURSb5D9xf4ekCN23-H0V8Q5fwKTe8L3pxM9QUhLd_hzdijD_iDsWFK36GNF9h9gIQcfod_8dAgyHd4crLYeIBGv3yFGu3yHf5gXX3Bm3XP1Nfi4d8hHv4V_kiM2V7w9t9_4eQfKnpfEPb-Hf5g7HnBPzH2qaIxBn2FNyd1nxdcfUANA_8OIi94s33lF1x_wB_T8Vsnm77graJrviAI8hX-mGL6eMHOL_j_aewfzp5f8Adj7wuejK1yXxBR9zus9AJbD3hqrO2u7mmva-VoLUyfo9ddUnMdh0DSZmsk2qG3dJ3HTbtamgwxM-GUspczSY0y16qXvjW33Dwvq70fbbd5c-n5jFZF12jLJJtm2zv70lxrXk7yWePwxunoUbXmS2ZPcjxXSWfbOKmcrtrTQK9mzXXILnsV85JG1-Jbd12ymTSPnevFtJzUc-eP8Yl0R3yrck9nLXX2quZNa5PbTqH8czYqubwPP3Xd7XdaddvVtMZXOeVQGtgx3eyUmpUBcKMH46aVSxua21YbonmOVWe5p1ElqnBXl7L67o2NbXFvZxTDZKjCudkoiI_uRc4ay_dcyWXuvvanzNKq9XnEZxfquotd4Wa3u1OkMZfue1uy41tYQdGmQyhJqXPKkmKlcUrzaMl3XQp1xx2ppMWic9Tb8r2VZlwdrnhtq3a5s5d9et-r3TTstslZ9KTLa_ddt1H9eccwMVETmYfKsTU9P1BuX7-v_cDc7H0Wz9vhGP_xtKtaRu20oF5rY2-m6JvVZUfBtXrdlEjLhQzXZXT4Y0eoTz2ZpVf-Qd4YQ4_Pw6I1sbqJwsFLZ-mpF1hGJimD6-f2tsasrezpTD8cpXFlO0c2gmv15nKdqtUyL6tLrfaV6ylxRLrZYCsMGbbVN8pfi83hssYWlG8OXmjTklLv0fpZscAOCbz6ofSLGy1IKH6aWCEaZOV9k8UUOmPWqeLLra6DOuTFC2OjBLe2DIO2S5lnWKn75sy1tKgDPduijixUWUyOL4QqxVYYSuvOfMe01ea-Cd57CYaWtrfNnQpbMsornQJ0002z8kCpQ-uUzdLKkSDRtiZ0jlu_HF7i_7wP-rC51eXWPSElLpo87mb3SD8yp0Kn26IMp4xR61pxjIuiLVGnm_vIJw-M4eqafU6INRILjG9xfgCiWvt17b9eneqM_WWP1BasvV0GdIdr2iH4qWMpinhoypPMNb7DpRurL4rAKtpcV9oqstqZ1bsrBUeAaM_ukkxjn9D-wmFlta4tlbuvt2bs6qJQtzSqdFDUfRduozwMZcqL-qDGNuZAadcliFg7bXGrG8zD1ah7iCrr7wNmdQ59j8JEWZrNUIxDO8eN7jGahyNjs1b0UmxuMFpDHsZutZTRc249N7RzN5bAVg_d5KwLpfQOQa4bxLLCkM0mSa6TTZ55dp25yxkCge-e7fB34qOowERnmkrLkmBZjua789OfFHGPw2VB-irPrXv0oOmMjQoSpP1wbrUdKbuX5RftMeRtmy-ywoAh496j0GBpgW-KDCNwKDJOwurYOLpIo-BSLKvCZMWfbmu30jT3mo7cUApV4V1WkZp08E4_mnvPfiF5E-9Fte3Lya7iUquWuDWxIeMc0Abi5HULlN2WKtr7STlICItrE0mp8eOmZiqZGgr9jC2puqGaDTEevtH96h_NucdxPUP-V7aF3KnZ2PcH0F7rv679QKeRGo1vRksxaqcz1E_iqJGjjcmGtFO5apQQM8ZfRRXeX7Sya_NuG6NVXvZ8pdMieN1YZQrkjPeOg9OG1BbKFCxnKEO3xs2VfaBfvbZZ5ezSG74Z_rnhiM8KxQosxGfxiAUDWFTniDwtwVPWpbCiqLwSIDCrmvgnwsm2jkOvXaEoaznmeaJyZ0Ag0aqUt6_U3Raa4D5ypQcMr0dEPY87YRa9AecRFsOf4TTPbhtbGol98dQ2M5UuuyB8FAzLrZCNThPIhl_k20gpskqfvrjlosMsSIZO3IN355Ay6hkpgMENy03YSC-0llPe6oWAg9ov5HPlLFdvzxMCOLcIkWU0Ou0sloSJHtigQQtaVanOqR1hzybcIt64sBMC1ihQtyb0m16dnaiwjCMacX_IRni6P1BtkJP_99oPnI950L98jk4OFmmmJvnic5ndHDmNIH3GgvFkr9PSLqF4MGEZZ8JJwG0EHxYixFIPMkiO-6Sr3Z2TZgLIwY0zeI3996l56LLD5zViwaBObEda1NkpnjAFdRSHWIVCVQpd6TFDHlBldMESJHZyUYQ7JGWsUXpCNLAmWJdHw204ABSE7iWLSewQg6K-EzEkBh0dkc_YLJU4GXbzqIE6ZV6BEIkGVazzBgVnhL7k5E44PxuFmy0CNypmgv2f4EcNhewZsaLr1kDbNNOMaLhBBv2YpJP5OCyKylbRLRLNrbTM6ouUxYOTljU571O2cUdF-FEYHIdAlFMntklxlNVjA0zWG-2_ywgdkf5780RWmw1prNHryJr3XTJBra49YDU2x62Rs4He6g6CElAJROhVZPxIY5A78ZSDlqN3G0XHdjyh48jAQEqQjEMNMuGxQcZM1itXI6XR8pNOMpoRf9S2FkG6r4Ma_cDEvfavaz-QN3FbuDnKWkkZjAnJMT6CDXwYiDuRbhPBvEJfunHWbpOqHWhEJrPI3Hj2nCV1VtTgNz7GOfduvcxR6ERcha0wqk9htpiNp0A9BgPqlTNCyJwCMzc-bzAO1aDZVo63EQ8ti37URcLmcJUSsbwsTKahfB05kxHN6DPkiowbP27nEJkoWssdPUZD6Yua2AE9s4ywH3shV_eInZJIBf1SCcIOgsv4QJSPWE4GKfvG13UsaodaX2wdZ10l11tQvp1HbfFbB0wNU9BoZi2OpkqJrAsXB6xAKLFawhlycklw62bSbEQq8t0krsbgRXfC_bnZFz2GGhKBMZvCGJMSdkN7kfCcMhBV0FhWhlWMRkInaJ2Y9ApTIqxlPCREG89ArS6jOy3XSI8onCCdGoGNcMJKxDl23IS4bcacQipMnBV5tgdncRK8MuMl1WrQXigonkmkwooowkyHBkinwxeWIBSoZdItC1qZFgsCYfz0DWb9A1Ct1l_XfgDmMzDRXK0PSK281eA2rxJz8W3msMlzOLK4GhEH8pHzBO5zThfbJBcTliKykJ-I0QTFG8GHESyXXtDz0lYQISI1nkvyXT3CNGmMkiFyTCTGSRD_aA50jTGOI1wDIY0MIdju5D6UI9wKzWLjnVRHdzKro4GQf0dOYPggYjunw9tShbOc3uJc10d743uTYDvjO_4J47XUwz5F4idlDKREiTwRX42UyrgQ8zUmdwt9WlbYnfcWv0ESIxL8xkXa7HjK1Kinxs95T0lxi43QlrAh2bKdZmc40vFpZxbCIcMkgsLkKKVukgr1YGiKo8Im-UMhxinRpBjpNcZS2MeOYVeh6uRt3kIC7CY4GlkT8s_4BoGEhndHJGQGsoxnoGUMHrQbOk3-JDwb0xP6yeTDMNpypMaLCsKIzQS5ZiVlMskrcR_pjF-YojqYFVNUh4tysChUhNR7cR_l3uQfEqDQahc6EM0Se2VIOr3WcemI0n5A1XT9uvYDnB-HTo6ixygAbsyswpFFNL_QlHySMWCsO_OYSfbh1YnZokIMCh5ujTWRY2BNR0yTk8lJPRgx1jM_P6o_tGbFV7FvpLAdplwMMH6BgGCPZsU3BTmmjlAMpkvmC9JgOjGFxNc4uCm0sLAJ2FeWxuQuaAU0IJsNX_eQUZxULykGEgZ4Big0g5TgkYrwWJQt2EIVM0kNnl4l6hwkqjLmo7mVo2GxFNXCckgh6c7ORENf0Wl1o1sxecHYyLF-CeZMNJe8ptwOevPAxPKNEWMwHeNBjWqIsywy-Twkdiyv1Tbm_aRVOgwN58E78zGqYyMSIoxgTAyPaUT5mM0JaCtarCDTULhjSAzplawghF_HhBodjOcxHbL4JMipoQwkZ06wcgSWMXY-fm_MmIgenKf_qB6KsJhiM0w54VFThUjMJxvkbJ9XJzFDPq9-bkWE4JzHJFUxPe7PMzgAITzCpcJnwkt5ENT3z50PsWn8wOfOv679wH8AVuUOgA==", length: 40 , codever: 4.12})
    #puts http.body_str

    http = Curl.get("http://80.80.172.245:8080/query", {fp_code: "eJy1mluOJLcORLck6kVxORIl7X8J97AG140x0OqPhmEjPJNZVSlRwYhgwimlIukBbbxAywt2eoBkeUHVF_h5QOafB8h6QSsvMHvB7g8oYi_Q_oK5XuDtATVO4ns48wGt3xfc8oCUn_ADr-QFZz1Acn7Bm1e9P-AnXt0X6HrBmzlVXvBmzvAX_IJX5aQH1DQe0PJ-QR0veHNy1gf8jpP5BW-tS_qC2Nb34P6AHzjZ9QXzvOCUB_xKr37BnGrlAS1a7Xto9QVvXq3zgqcS9mIP-B0n7ws8P0Cyv-DNySEv-A1jf-Oh0eHfw288VJ4QLf49vB02nRf8hs_DXrDuA7rNByTRF_yGsZ-f_xb8vuCdCmp_Qc8v2PMBWfwFqzygpPWCN5_7eIHXB9SQlu9Bn_D5gW_hzfYn635QUdkv-A819u376wXHHyDVXqD-gv9OY3_DyXcq-GFOuS9o9oI3694q2uUBPQr2PfzAyfWAX3HyrZM_zN1v339CRKHvYfYX_CrH-gvefP5VUj0PiCT0gDle4OUFdzygmb7gmVR7by8IE_4WfqeizzdFLg_4ibHPiV7tBVGw7-FXb5nOC_47Bf4h5T5TwZvPIS3fwg8T_TupflLjd9CTfAsE7Lrdz9Itdru104eY1FO71OLa5u3Tho9mbXLr9JPX1JW5VbSpbxPZQ-WuI7nNWava6b3XfOs92uNjZVL2OV188XPkicFny5EpVeq884x-Smtix3uyPtaQNafV0d06Kb6Mu_fZNKfblWGLPNOv2s718GQvXC_b5ipX1_DF4rPMKTOvsyXfXXyevcdtesRWWVX92CziOgcbv4PtaW9-bs66dq3jLLmlO42HO9ac7Kbmt5fcNp_Xntee7SxXG3b3KHrV866XG7OfO3JkuaqjtuGdP18eeAu_NoIJ0Tysra161s5GTcvqhgWsfNLddSV2MZtVX-plXUvap9fGFjb1akI57ugs4WrbbdvNPam3w2oo4NHq3LottaP5NKXduuvIHLfUa7VWVP_2vdjjaL3ne0upNuranQus07Od1rpykqLFRW5mbaznH9hyOKa_r32BQIA6VxtLNmWlATzfnNZg53dpcj3HGTnzQLxmTfBnWBPVu3MZ-3L5Xjuj5JFtndV9We-nQyFrQ4rf2mpLY6bdbtoRFVW7Xzm7WvdpnmZrpcitetu4c1MZ-DSGtFkgcK2bttpuubZVoFXjEaxmmcaio5K9JLOxIc6oMvTygSp56eDHtve1b03lzqpaVy8fsRWIdorpnUSjvcbW420nWKanl80no5CdUluR5kavsdpTM2cgtemCwvNAssJavLeRlVqwWYFy3uq-8frW4dCN-Wd6Un40UWBPtbbjd69sMrd0WHRgowj95z7LUB-1Slf62u6MCbYUSt9X7pKZ8NhZ53yadPR1zr2K6JC5ZJnQQhRjHzbKrb7QgqunFdrPKDBf37Pv6136ikcxE-5d2bDIasVc2ceUKGeiN9OB2kWY0FtOkKTl0osYvON7tbGesxCmojNDdp9yTiwGYnmlR-ZYM4tlyCKprvUFJWfu_H3tC-4RvjVodz-t75xrbqXnntH9DPk5gwY1Ztk-rynLH7PXNEMcoe1iTc0XRn6ziLRxapMZr0Vz2pRrneJjao3SzSSrjlU5jHlxjjL6vYuaiJ6cz5TOpjmanBOs6jT83KWyyVnonorIISK5Dza4yNh0w0Zl0jJ0CTbQy0sGDSVb98l2r39WZDUtv7Yhas409VKB8MPOhtEwe2wWufZBJRvq3DnrgjiVfosbKo7OtfZZc2NbN4iPnlFWpq07eQq6swyBVO87HLEegTeoEJoojpgrQkfjLqRlVOdHuYe9oIlIXbrWiEGa2f-Zp0N1yWEdowxUHRkexMJecZRltujpo8Z3liVUJCstU9GE1ScnehsFPQOJne7wOjdpavxJqzaqSgqkG4QP8k2l6BCg33PuRKHbueysfgSOTroN3fC1tclY3nLoIH7VthTpI01-p3fHRiAeBGW9V4fSFjigKUK-ueozzzEmgjHW_QIo1P997QugAAqFXJ6NV3j_1HPoSSg_mk1br8s5GqLXUb2RdoZE9GPfo43SdeGnC21kSM81bUy1WqGCVhpSGu9mON19oZOGJdm28BgrBVsaNCbddPAUzbdczB4RSVvxRs6cnFW4oHAP0S34Bx3ZEF2bKDls86btDkUKqKsin2sP-WxBSrhZm3srbWUN3u2ZlQMmRqyL09J0jlDCyz5YI8qfK_qOhPVBx332u_1ififXMXBBsqqnoaiLkvFQqqwJIklmb27Qedr8fI1c6hNlrYj88Iptj7IhhFX2fnebFIonjymExXXicJAympYWEAZL-uWgY55bWscguu98jgldWMpouLEwy2U6de_SEZzpRl_HbwyMqaDdOSy4GmVFes-iOiwVAtG-kRRCYmers7DwbmXGaxDpHnGoF9QtxnUoZzmPz4ejWZCGi6RPjhMjDdPB1ghkoxMzBsmD8-CLtebNt8g9c_mGEyjKnLMgASjf4QTYZr6eWLxzEm3QkjPk6R_g7ln_uvYFG1vc2MfttTDhE-SxJF84jNIqkpCaCGJ4WWhi4-xyrRANV-qsuS6jM-eYcWycS0sUjybgFASKnJays8xWS6XL6ueuxJm0yd7bWss5HCJVc_IFiYU0g14QIeiHS1sX6D_j2WQ4egqjJgrVQgk05Id5h7-NmLY3Ijs5udnYkm8nD-sd_C5WWxKF5SiWlYUhEQlZIWFKsP_VF2dM7fuq_OIYSp4iSuPwbJpH-ZwUHqHnkLNt1jATuQP7JBuPSzBGTA7-TwucMDMSzbmFQCIksqb1FlqPVIsgLCZlo1IHCcT0CxmARXa6lnzrGh2qcxOEoB4R3HAYRwsbKYPv1qslsqEUMkvE15kIvgjPgIspnI64g6MQMkwOT2BZrAsVvnmEQ2o1mN0vLB6REzoeNip347UQXTCFFJ-JXRVFIlAj7lQlAjBJibqRQl2Db5votf6kPbppECvYIsdEXCL8Lw6DUp44ecI6QgRLCfMnrtK3zqY97KtOiVZC8lP-Avqdtv772heEUwWDODEatHFyDACXEAR3l-WIg7tG6IUkEJRYOmMkYFVGqik0nwhpDPrfT6OSqr3xYVosBM7tlML4Q4aELHnT0eEnoxs6mzMlgD5YiX2UiADWOLrEd7QzY8DPEf4YuSUVWxEA6G5aYjbyvTsmX3KJkpDdLbKKZozKIRteSqdBGWaX3qwjd8nPAXEh1ts_dw80rl93aZ_wx1SJcTJweqrUOWgy4dHxuYs-e6mYkK4S6Qj9wcs7jyVozx5TxQ7PXvx1bdIcxSP6fWralcP13HkycQ4tyTzjZPFxDcGU1YPthEtOvfc2kXEGqL3zVHjeY9IhBRAH610eAhhho8juBCoqT4THYDCz4X_WopsGa5j5Zy0EJ_mzZqJnwus2GZgjPwxvZs62RnSDQF0hTjV4RxhgDss8XBOhiGaf8xZOY8cAuY8vIfUO2pr-IKXtufBHY_4gvzDtOOaVnchEprrnC-iXZP-69gWV9uFgsBg2yrSb2WpDacahYQn7PpjZiMSkZyYVDzU3wjolqMJshr-RT7hzQ5PECFpMf4yFJBw6gT6dFGwq51xC_XFWkPnesHWCYa6cNlPpQGyD8cWZ_y5zP8KOJCylhkhKYnT3TQVJHYQuHoZrdZJFzTghQ604wxPRHnukdBEXmfZ4uqRQH2Nwd4IaXUeG2X92eej7CNLM1o0jIfozz08yAutC19MgoWf-WlA_SpEYcC-i1ZCgQhOgA4gbrYG5WqskTsYSlknXUa3FWC2F75BSSALNBXrAbwJHHeETVbEkm4xCSSkg0Y4ILGRxWnahuzkGO-TszLwMsUDM7lVajgRCuqNQ-NsifDBdl47G4wSf01ISB9Nai8m-Wz0IGyktMbgqM2xkSth94l2JE1BtNUWziQfMRw3Nh2z8t4W6LTptotyUmQnuMpvBVIYEhgW8A7eGsB7EZZxrSp9Oo4beIvISaIuFQpAeozTYAXbLsBkaZJFhEWOYh8ps-o-Jo38BPbHrv659AScd3NSWET7EFrflInZLyrqMAJSQeYzEQyoZpTRMgQOSSlCg_e9ljrLOEQ7mb6Xr2wlRQ__YwGU9RAbCl0eQbVPjX5Il608YOyqLdA6iKKPMFH48b5qFmiK3_HUy7ExFmNBYTh4to09KOaSvkWgLhI_zvCQyMlm4wo4suCgZ68K3iQU8vNM304hzCH2jpTN7g2mOkdFAN_KrxpuaHK8H-qx8kGwCi_EYrByXK8j-yYzRJMsTHXaxbNqCNLyxQfOQTI6DHqkDX0KAqDgmejcpGvm3iNOkqJqJDLMOBsx4c0LqNmxCR-_BbuSYidINz2EYZSSQyOqMept2JSxgtxbNg3lVI8Om-N-nikZMJpkwnLpwlCdxUoQdgnchnBKpOrMfEyBuFiFMMT2a4xLV9iR4MOexvONMyjzB8Pl4J8UIGBMgzCT3aybyz1LLLUk-EZCa7HpGvEmMVzl8BYn5qAzZSomQNhJSUyN2zWkMcM2iXf4PyC0m-Pe1L_gf3AZTLg==", length: 40 , codever: 4.12})
    puts http.inspect
    #puts http.body_str.inspect
    diqka = http.body_str
    puts diqka.inspect
    #pergjigja = http.message
    data = JSON.parse(diqka)
    puts data.inspect
    data.each do |child|
      #
    end

    matchi = data['match']

    puts matchi


  end
end
